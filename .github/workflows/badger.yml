# This is a basic workflow to help you get started with Actions

name: Badgerr

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

  schedule:
    - cron: "0 0 * * *"

jobs:

  update-badges:
    runs-on: ubuntu-latest
    steps:

    - uses: actions/checkout@v2
    - name: Run Makefile to generate badges based on repositories languages.
      env:
        TOKEN: ${{ secrets.TOKEN }}
      run: make languages

    - name: Update repository.
      run: |
        echo "Updating '${GITHUB_HEAD_REF}‚Ä¶'"
        git config --global user.email "jmurowaniecki@gmail.com"
        git config --global user.name "John's Shadow üúè"
        git commit -am '[skip ci] updating badges' && \
        git push origin ${GITHUB_HEAD_REF} || true
